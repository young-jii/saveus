(function(k,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("@vueuse/core"),require("@vueuse/integrations/useFocusTrap")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","@vueuse/integrations/useFocusTrap"],o):(k=typeof globalThis<"u"?globalThis:k||self,o(k.index={},k.Vue,k.VueUse,k.VueUseFocusTrap))})(this,function(k,o,L,me){"use strict";const ye=e=>(...t)=>{e&&(e==null||e(...t),e=null)},j=()=>{};function z(e,t,s){return e>s?s:e<t?t:e}const K=e=>typeof e=="string";function J(e,t){var r;const s=((r=H(e,t))==null?void 0:r[0])||t;e.push(s)}function H(e,t){const s=e.indexOf(t);if(s!==-1)return e.splice(s,1)}function oe(e){return Object.entries(e)}const te={teleportTo:{type:[String,null,Boolean,Object],default:"body"},modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:"if",validator:e=>["if","show","visible"].includes(e)},hideOverlay:{type:Boolean,default:void 0},overlayBehavior:{type:String,default:"auto",validator:e=>["auto","persist"].includes(e)},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:"non-interactive",validator:e=>["interactive","non-interactive"].includes(e)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},reserveScrollBarGap:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:e})=>1e3+2*e},swipeToClose:{type:String,default:"none",validator:e=>["none","up","right","down","left"].includes(e)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function ne(e=!1){const t=o.ref(e),s=o.ref(t.value?0:void 0);return[t,s,{beforeEnter(){s.value=1},afterEnter(){s.value=0},beforeLeave(){s.value=3},afterLeave(){s.value=2}}]}function he(e,t){const{modelValueLocal:s,onEntering:r,onEnter:u,onLeaving:d,onLeave:c}=t,l=o.ref(s.value),[n,i,h]=ne(l.value),[p,M,S]=ne(l.value),B=o.computed(()=>typeof e.contentTransition=="string"?{name:e.contentTransition,appear:!0}:{appear:!0,...e.contentTransition}),C=o.computed(()=>typeof e.overlayTransition=="string"?{name:e.overlayTransition,appear:!0}:{appear:!0,...e.overlayTransition}),E=o.computed(()=>(e.hideOverlay||M.value===2)&&i.value===2);o.watch(E,g=>{g&&(l.value=!1)}),o.watch(i,g=>{if(g===1){if(!l.value)return;r==null||r()}else if(g===0){if(!l.value)return;u==null||u()}else g===3?d==null||d():g===2&&(c==null||c())});async function w(){l.value=!0,await o.nextTick(),n.value=!0,p.value=!0}function V(){n.value=!1,p.value=!1}return{visible:l,contentVisible:n,contentListeners:h,contentTransition:B,overlayVisible:p,overlayListeners:S,overlayTransition:C,enterTransition:w,leaveTransition:V}}function we(e,t,s){const{vfmRootEl:r,vfmContentEl:u,visible:d,modelValueLocal:c}=s,l=o.ref();function n(){d.value&&e.escToClose&&(c.value=!1)}function i(p){l.value=p==null?void 0:p.target}function h(){var p;l.value===r.value&&(e.clickToClose?c.value=!1:((p=u.value)==null||p.focus(),t("clickOutside")))}return{onEsc:n,onMouseupRoot:h,onMousedown:i}}function be(e,t,s){let r=!1;const{open:u,close:d}=s,c=o.ref(!1),l={get value(){return c.value},set value(i){n(i)}};function n(i){(i?u():d())?(c.value=i,i!==e.modelValue&&t("update:modelValue",i)):(r=!0,t("update:modelValue",!i),o.nextTick(()=>{r=!1}))}return o.watch(()=>e.modelValue,i=>{r||(l.value=!!i)}),{modelValueLocal:l}}function Te(e,t){if(e.focusTrap===!1)return{focus(){},blur(){}};const{focusEl:s}=t,{hasFocus:r,activate:u,deactivate:d}=me.useFocusTrap(s,e.focusTrap);function c(){requestAnimationFrame(()=>{u()})}function l(){r.value&&d()}return{focus:c,blur:l}}let Q=!1;if(typeof window<"u"){const e={get passive(){Q=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}const le=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let A=[],G=!1,W=0,se=-1,x,U;const Se=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["auto","scroll"].includes(t.overflowY)&&e.scrollHeight>e.clientHeight},ke=(e,t)=>!(e.scrollTop===0&&t<0||e.scrollTop+e.clientHeight+t>=e.scrollHeight&&t>0),Me=e=>{const t=[];for(;e;){if(t.push(e),e.classList.contains("vfm"))return t;e=e.parentElement}return t},ge=(e,t)=>{let s=!1;return Me(e).forEach(u=>{Se(u)&&ke(u,t)&&(s=!0)}),s},re=e=>A.some(()=>ge(e,-W)),X=e=>{const t=e||window.event;return re(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},Be=e=>{if(U===void 0){const t=!!e&&e.reserveScrollBarGap===!0,s=window.innerWidth-document.documentElement.clientWidth;if(t&&s>0){const r=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);U=document.body.style.paddingRight,document.body.style.paddingRight=`${r+s}px`}}x===void 0&&(x=document.body.style.overflow,document.body.style.overflow="hidden")},Ee=()=>{U!==void 0&&(document.body.style.paddingRight=U,U=void 0),x!==void 0&&(document.body.style.overflow=x,x=void 0)},Ce=e=>e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1,Ve=(e,t)=>(W=e.targetTouches[0].clientY-se,re(e.target)?!1:t&&t.scrollTop===0&&W>0||Ce(t)&&W<0?X(e):(e.stopPropagation(),!0)),Oe=(e,t)=>{if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(A.some(r=>r.targetElement===e))return;const s={targetElement:e,options:t||{}};A=[...A,s],le?(e.ontouchstart=r=>{r.targetTouches.length===1&&(se=r.targetTouches[0].clientY)},e.ontouchmove=r=>{r.targetTouches.length===1&&Ve(r,e)},G||(document.addEventListener("touchmove",X,Q?{passive:!1}:void 0),G=!0)):Be(t)},Le=e=>{if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}A=A.filter(t=>t.targetElement!==e),le?(e.ontouchstart=null,e.ontouchmove=null,G&&A.length===0&&(document.removeEventListener("touchmove",X,Q?{passive:!1}:void 0),G=!1)):A.length||Ee()};function Pe(e,t){const{lockScrollEl:s,modelValueLocal:r}=t;let u;o.watch(s,l=>{l&&(u=l)},{immediate:!0}),o.watch(()=>e.lockScroll,l=>{l?c():d()}),o.onBeforeUnmount(()=>{d()});function d(){u&&Le(u)}function c(){r.value&&e.lockScroll&&u&&Oe(u,{reserveScrollBarGap:e.reserveScrollBarGap,allowTouchMove:l=>{for(;l&&l!==document.body;){if(l.getAttribute("vfm-scroll-lock-ignore")!==null)return!0;l=l.parentElement}return!1}})}return{enableBodyScroll:d,disableBodyScroll:c}}function De(e){const t=o.ref();function s(u){var d;t.value=(d=e.zIndexFn)==null?void 0:d.call(e,{index:u<=-1?0:u})}function r(){t.value=void 0}return{zIndex:t,refreshZIndex:s,resetZIndex:r}}const _={beforeMount(e,{value:t},{transition:s}){e._vov=e.style.visibility==="hidden"?"":e.style.visibility,s&&t?s.beforeEnter(e):Y(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:r}){!t!=!s&&(r?t?(r.beforeEnter(e),Y(e,!0),r.enter(e)):r.leave(e,()=>{Y(e,!1)}):Y(e,t))},beforeUnmount(e,{value:t}){Y(e,t)}};function Y(e,t){e.style.visibility=t?e._vov:"hidden"}const ie=e=>{if(e instanceof MouseEvent){const{clientX:t,clientY:s}=e;return{x:t,y:s}}else{const{clientX:t,clientY:s}=e.targetTouches[0];return{x:t,y:s}}};function Ae(e){if(!e)return!1;let t=!1;const s={get passive(){return t=!0,!1}};return e.addEventListener("x",j,s),e.removeEventListener("x",j),t}function Re(e,{threshold:t=0,onSwipeStart:s,onSwipe:r,onSwipeEnd:u,passive:d=!0}){const c=o.reactive({x:0,y:0}),l=o.reactive({x:0,y:0}),n=o.computed(()=>c.x-l.x),i=o.computed(()=>c.y-l.y),{max:h,abs:p}=Math,M=o.computed(()=>h(p(n.value),p(i.value))>=t),S=o.ref(!1),B=o.computed(()=>M.value?p(n.value)>p(i.value)?n.value>0?"left":"right":i.value>0?"up":"down":"none"),C=(v,y)=>{c.x=v,c.y=y},E=(v,y)=>{l.x=v,l.y=y};let w,V;function g(v){w.capture&&!w.passive&&v.preventDefault();const{x:y,y:I}=ie(v);C(y,I),E(y,I),s==null||s(v),V=[L.useEventListener(e,"mousemove",P,w),L.useEventListener(e,"touchmove",P,w),L.useEventListener(e,"mouseup",a,w),L.useEventListener(e,"touchend",a,w),L.useEventListener(e,"touchcancel",a,w)]}function P(v){const{x:y,y:I}=ie(v);E(y,I),!S.value&&M.value&&(S.value=!0),S.value&&(r==null||r(v))}function a(v){S.value&&(u==null||u(v,B.value)),S.value=!1,V.forEach(y=>y())}let b=[];return o.onMounted(()=>{const v=Ae(window==null?void 0:window.document);d?w=v?{passive:!0}:{capture:!1}:w=v?{passive:!1,capture:!0}:{capture:!0},b=[L.useEventListener(e,"mousedown",g,w),L.useEventListener(e,"touchstart",g,w)]}),{isSwiping:S,direction:B,coordsStart:c,coordsEnd:l,lengthX:n,lengthY:i,stop:()=>{b.forEach(v=>v()),V.forEach(v=>v())}}}function Ie(e,t){const{vfmContentEl:s,modelValueLocal:r}=t,u=.1,d=300,c=o.ref(),l=o.computed(()=>{if(!(e.swipeToClose===void 0||e.swipeToClose==="none"))return e.showSwipeBanner?c.value:s.value}),n=o.ref(0),i=o.ref(!0);let h=j,p=!0,M,S=!1;const{lengthX:B,lengthY:C,direction:E,isSwiping:w}=Re(l,{threshold:e.threshold,onSwipeStart(a){h=L.useEventListener(document,"selectionchange",()=>{var b;i.value=(b=window.getSelection())==null?void 0:b.isCollapsed}),M=new Date().getTime(),S=P(a==null?void 0:a.target)},onSwipe(){var a,b,O,v;if(S&&i.value&&E.value===e.swipeToClose){if(E.value==="up"){const y=z(Math.abs(C.value||0),0,((a=l.value)==null?void 0:a.offsetHeight)||0)-(e.threshold||0);n.value=y}else if(E.value==="down"){const y=z(Math.abs(C.value||0),0,((b=l.value)==null?void 0:b.offsetHeight)||0)-(e.threshold||0);n.value=-y}else if(E.value==="right"){const y=z(Math.abs(B.value||0),0,((O=l.value)==null?void 0:O.offsetWidth)||0)-(e.threshold||0);n.value=-y}else if(E.value==="left"){const y=z(Math.abs(B.value||0),0,((v=l.value)==null?void 0:v.offsetWidth)||0)-(e.threshold||0);n.value=y}}},onSwipeEnd(a,b){if(h(),!i.value){i.value=!0;return}const O=new Date().getTime(),v=b===e.swipeToClose,y=(()=>{var Z,q;if(b==="up"||b==="down")return Math.abs((C==null?void 0:C.value)||0)>u*(((Z=l.value)==null?void 0:Z.offsetHeight)||0);if(b==="left"||b==="right")return Math.abs((B==null?void 0:B.value)||0)>u*(((q=l.value)==null?void 0:q.offsetWidth)||0)})(),I=O-M<=d;if(p&&S&&v&&(y||I)){r.value=!1;return}n.value=0}}),V=o.computed(()=>{if(e.swipeToClose==="none")return;const a=(()=>{switch(e.swipeToClose){case"up":case"down":return"translateY";case"left":case"right":return"translateX"}})();return{class:{"vfm-bounce-back":!w.value},style:{transform:`${a}(${-n.value}px)`}}});o.watch(()=>i.value,a=>{a||(n.value=0)}),o.watch(()=>r.value,a=>{a&&(n.value=0)}),o.watch(()=>n.value,(a,b)=>{switch(e.swipeToClose){case"down":case"right":p=a<b;break;case"up":case"left":p=a>b;break}});function g(a){e.preventNavigationGestures&&a.preventDefault()}function P(a){const b=a==null?void 0:a.tagName;if(!b||["INPUT","TEXTAREA"].includes(b))return!1;const O=(()=>{switch(e.swipeToClose){case"up":return(a==null?void 0:a.scrollTop)+(a==null?void 0:a.clientHeight)===(a==null?void 0:a.scrollHeight);case"left":return(a==null?void 0:a.scrollLeft)+(a==null?void 0:a.clientWidth)===(a==null?void 0:a.scrollWidth);case"down":return(a==null?void 0:a.scrollTop)===0;case"right":return(a==null?void 0:a.scrollLeft)===0;default:return!1}})();return a===l.value?O:O&&P(a==null?void 0:a.parentElement)}return{vfmContentEl:s,swipeBannerEl:c,bindSwipe:V,onTouchStartSwipeBanner:g}}const ae=Symbol("vfm");let R;const Ne=e=>R=e,Fe={install:j,modals:[],openedModals:[],openedModalOverlays:[],dynamicModals:[],modalsContainers:o.ref([]),get:()=>{},toggle:()=>{},open:()=>{},close:()=>{},closeAll:()=>Promise.allSettled([])},je=()=>o.getCurrentInstance()&&o.inject(ae,Fe)||R;function He(){const e=o.shallowReactive([]),t=o.shallowReactive([]),s=o.shallowReactive([]),r=o.shallowReactive([]),u=o.ref([]),d=o.markRaw({install(c){c.provide(ae,d),c.config.globalProperties.$vfm=d},modals:e,openedModals:t,openedModalOverlays:s,dynamicModals:r,modalsContainers:u,get(c){return e.find(l=>{var n,i;return((i=(n=N(l))==null?void 0:n.value.modalId)==null?void 0:i.value)===c})},toggle(c,l){var i;const n=d.get(c);return(i=N(n))==null?void 0:i.value.toggle(l)},open(c){return d.toggle(c,!0)},close(c){return d.toggle(c,!1)},closeAll(){return Promise.allSettled(t.reduce((c,l)=>{const n=N(l),i=n==null?void 0:n.value.toggle(!1);return i&&c.push(i),c},[]))}});return Ne(d),d}function N(e){var t;return(t=e==null?void 0:e.exposed)==null?void 0:t.modalExposed}const xe=o.defineComponent({inheritAttrs:!1}),ce=o.defineComponent({...xe,__name:"VueFinalModal",props:te,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{expose:t,emit:s}){const r=e,u=s,d=o.useAttrs(),c=o.getCurrentInstance(),{modals:l,openedModals:n,openedModalOverlays:i}=F(),h=o.ref(),p=o.ref(),{focus:M,blur:S}=Te(r,{focusEl:h}),{zIndex:B,refreshZIndex:C,resetZIndex:E}=De(r),{modelValueLocal:w}=be(r,u,{open:_e,close:eo}),{enableBodyScroll:V,disableBodyScroll:g}=Pe(r,{lockScrollEl:h,modelValueLocal:w});let P=j;const{visible:a,contentVisible:b,contentListeners:O,contentTransition:v,overlayVisible:y,overlayListeners:I,overlayTransition:Z,enterTransition:q,leaveTransition:Ze}=he(r,{modelValueLocal:w,onEntering(){o.nextTick(()=>{g(),M()})},onEnter(){u("opened"),P("opened")},onLeave(){H(n,c),E(),V(),u("closed"),P("closed")}}),{onEsc:qe,onMouseupRoot:Ke,onMousedown:de}=we(r,u,{vfmRootEl:h,vfmContentEl:p,visible:a,modelValueLocal:w}),{swipeBannerEl:Je,bindSwipe:Qe,onTouchStartSwipeBanner:fe}=Ie(r,{vfmContentEl:p,modelValueLocal:w}),pe=o.computed(()=>c?n.indexOf(c):-1);o.watch([()=>r.zIndexFn,pe],()=>{a.value&&C(pe.value)}),o.onMounted(()=>{J(l,c)}),r.modelValue&&(w.value=!0);function _e(){let f=!1;return u("beforeOpen",{stop:()=>f=!0}),f?!1:(J(n,c),J(i,c),ee(),q(),!0)}function eo(){let f=!1;return u("beforeClose",{stop:()=>f=!0}),f?!1:(H(i,c),ee(),S(),Ze(),!0)}function oo(){w.value=!1}o.onBeforeUnmount(()=>{V(),H(l,c),H(n,c),S(),ee()});async function ee(){await o.nextTick();const f=i.filter(m=>{var D;const T=N(m);return(T==null?void 0:T.value.overlayBehavior.value)==="auto"&&!((D=T==null?void 0:T.value.hideOverlay)!=null&&D.value)});f.forEach((m,T)=>{const D=N(m);D!=null&&D.value&&(D.value.overlayVisible.value=T===f.length-1)})}const to=o.toRef(()=>r.modalId),ve=o.toRef(()=>r.hideOverlay),no=o.toRef(()=>r.overlayBehavior),lo=o.computed(()=>({modalId:to,hideOverlay:ve,overlayBehavior:no,overlayVisible:y,toggle(f){return new Promise(m=>{P=ye(D=>m(D));const T=typeof f=="boolean"?f:!w.value;w.value=T})}}));return t({modalExposed:lo}),(f,m)=>(o.openBlock(),o.createBlock(o.Teleport,{to:f.teleportTo?f.teleportTo:void 0,disabled:!f.teleportTo},[f.displayDirective!=="if"||o.unref(a)?o.withDirectives((o.openBlock(),o.createElementBlock("div",o.mergeProps({key:0},o.unref(d),{ref_key:"vfmRootEl",ref:h,class:["vfm vfm--fixed vfm--inset",{"vfm--prevent-none":f.background==="interactive"}],style:{zIndex:o.unref(B)},role:"dialog","aria-modal":"true",onKeydown:m[7]||(m[7]=o.withKeys(()=>o.unref(qe)(),["esc"])),onMouseup:m[8]||(m[8]=o.withModifiers(()=>o.unref(Ke)(),["self"])),onMousedown:m[9]||(m[9]=o.withModifiers(T=>o.unref(de)(T),["self"]))}),[ve.value?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(o.Transition,o.mergeProps({key:0},o.unref(Z),o.toHandlers(o.unref(I))),{default:o.withCtx(()=>[f.displayDirective!=="if"||o.unref(y)?o.withDirectives((o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(["vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none",f.overlayClass]),style:o.normalizeStyle(f.overlayStyle),"aria-hidden":"true"},null,6)),[[o.vShow,f.displayDirective!=="show"||o.unref(y)],[o.unref(_),f.displayDirective!=="visible"||o.unref(y)]]):o.createCommentVNode("",!0)]),_:1},16)),o.createVNode(o.Transition,o.mergeProps(o.unref(v),o.toHandlers(o.unref(O))),{default:o.withCtx(()=>[f.displayDirective!=="if"||o.unref(b)?o.withDirectives((o.openBlock(),o.createElementBlock("div",o.mergeProps({key:0,ref_key:"vfmContentEl",ref:p,class:["vfm__content vfm--outline-none",[f.contentClass,{"vfm--prevent-auto":f.background==="interactive"}]],style:f.contentStyle,tabindex:"0"},o.unref(Qe),{onMousedown:m[6]||(m[6]=()=>o.unref(de)())}),[o.renderSlot(f.$slots,"default",o.normalizeProps(o.guardReactiveProps({close:oo}))),f.showSwipeBanner?(o.openBlock(),o.createElementBlock("div",{key:0,ref_key:"swipeBannerEl",ref:Je,class:"vfm-swipe-banner-container",onTouchstart:m[2]||(m[2]=T=>o.unref(fe)(T))},[o.renderSlot(f.$slots,"swipe-banner",{},()=>[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:m[0]||(m[0]=T=>f.swipeToClose==="left"&&T.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:m[1]||(m[1]=T=>f.swipeToClose==="right"&&T.preventDefault())},null,32)])],544)):!f.showSwipeBanner&&f.preventNavigationGestures?(o.openBlock(),o.createElementBlock("div",{key:1,class:"vfm-swipe-banner-container",onTouchstart:m[5]||(m[5]=T=>o.unref(fe)(T))},[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:m[3]||(m[3]=T=>f.swipeToClose==="left"&&T.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:m[4]||(m[4]=T=>f.swipeToClose==="right"&&T.preventDefault())},null,32)],32)):o.createCommentVNode("",!0)],16)),[[o.vShow,f.displayDirective!=="show"||o.unref(b)],[o.unref(_),f.displayDirective!=="visible"||o.unref(b)]]):o.createCommentVNode("",!0)]),_:3},16)],16)),[[o.vShow,f.displayDirective!=="show"||o.unref(a)],[o.unref(_),f.displayDirective!=="visible"||o.unref(a)]]):o.createCommentVNode("",!0)],8,["to","disabled"]))}});function F(){const e=je();if(!e)throw new Error(`[Vue Final Modal]: getActiveVfm was called with no active Vfm. Did you forget to install vfm?
	const vfm = createVfm()
	app.use(vfm)
This will fail in production.`);return e}function ue(e,t=ce){const{component:s,slots:r,...u}=e,d=typeof r>"u"?{}:Object.fromEntries(oe(r).map(([c,l])=>K(l)?[c,l]:$(l)?[c,{...l,component:o.markRaw(l.component)}]:[c,o.markRaw(l)]));return{...u,component:o.markRaw(s||t),slots:d}}function Ue(e){const t=o.reactive({id:Symbol("useModal"),modelValue:!!(e!=null&&e.defaultModelValue),resolveOpened:()=>{},resolveClosed:()=>{},attrs:{},...ue(e)});L.tryOnUnmounted(()=>{t!=null&&t.keepAlive||l()}),t.modelValue===!0&&(R?R==null||R.dynamicModals.push(t):o.nextTick(()=>{const n=F();n==null||n.dynamicModals.push(t)}));async function s(){let n;return R?n=R:(await o.nextTick(),n=F()),t.modelValue?Promise.resolve("[Vue Final Modal] modal is already opened."):(l(),t.modelValue=!0,n.dynamicModals.push(t),new Promise(i=>{t.resolveOpened=()=>i("opened")}))}function r(){return t.modelValue?(t.modelValue=!1,new Promise(n=>{t.resolveClosed=()=>n("closed")})):Promise.resolve("[Vue Final Modal] modal is already closed.")}function u(n){const{slots:i,...h}=ue(n,t.component);n.defaultModelValue!==void 0&&(t.defaultModelValue=n.defaultModelValue),(n==null?void 0:n.keepAlive)!==void 0&&(t.keepAlive=n==null?void 0:n.keepAlive),d(t,h),i&&oe(i).forEach(([p,M])=>{const S=t.slots[p];K(S)?t.slots[p]=M:$(S)&&$(M)?d(S,M):t.slots[p]=M})}function d(n,i){i.component&&(n.component=i.component),i.attrs&&c(n.attrs,i.attrs)}function c(n,i){return Object.entries(i).forEach(([h,p])=>{n[h]=p}),n}function l(){const n=F(),i=n.dynamicModals.indexOf(t);i!==-1&&n.dynamicModals.splice(i,1)}return{options:t,open:s,close:r,patchOptions:u,destroy:l}}function Ye(e){return e}function $(e){return typeof e=="object"&&e!==null?"component"in e:!1}function ze(e,t){return Object.keys(t).reduce((s,r)=>(s[r]=e==null?void 0:e[r],s),{})}function Ge(e){return{"onUpdate:modelValue":t=>e==null?void 0:e("update:modelValue",t),onBeforeClose:t=>e==null?void 0:e("beforeClose",t),onClosed:()=>e==null?void 0:e("closed"),onBeforeOpen:t=>e==null?void 0:e("beforeOpen",t),onOpened:()=>e==null?void 0:e("opened"),onClickOutside:()=>e==null?void 0:e("clickOutside")}}function We(e){const{props:t,modalProps:s,emit:r}=e,u=o.computed(()=>ze(t,s)),d=Ge(r),c=o.useAttrs();return o.computed(()=>({...u.value,...d,...c}))}const Xe=["innerHTML"],$e=o.defineComponent({__name:"ModalsContainer",setup(e){const{modalsContainers:t,dynamicModals:s}=F(),r=Symbol("ModalsContainer"),u=o.computed(()=>{var l;return r===((l=t.value)==null?void 0:l[0])});t.value.push(r),o.onBeforeUnmount(()=>{t.value=t.value.filter(l=>l!==r)});function d(l){var n,i,h;(i=(n=s[l])==null?void 0:n.resolveClosed)==null||i.call(n),(h=s[l])!=null&&h.keepAlive||s.splice(l,1)}function c(l){var n,i;(i=(n=s[l])==null?void 0:n.resolveOpened)==null||i.call(n)}return(l,n)=>u.value?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(s),(i,h)=>(o.openBlock(),o.createBlock(o.resolveDynamicComponent(i.component),o.mergeProps({key:i.id},{displayDirective:i!=null&&i.keepAlive?"show":void 0,...typeof i.attrs=="object"?i.attrs:{}},{modelValue:i.modelValue,"onUpdate:modelValue":p=>i.modelValue=p,onClosed:()=>d(h),onOpened:()=>c(h)}),o.createSlots({_:2},[o.renderList(i.slots,(p,M)=>({name:M,fn:o.withCtx(()=>[o.unref(K)(p)?(o.openBlock(),o.createElementBlock("div",{key:0,innerHTML:p},null,8,Xe)):o.unref($)(p)?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(p.component),o.normalizeProps(o.mergeProps({key:1},p.attrs)),null,16)):(o.openBlock(),o.createBlock(o.resolveDynamicComponent(p),{key:2}))])}))]),1040,["modelValue","onUpdate:modelValue","onClosed","onOpened"]))),128)):o.createCommentVNode("",!0)}});k.ModalsContainer=$e,k.VueFinalModal=ce,k.createVfm=He,k.getModalExposed=N,k.useModal=Ue,k.useModalSlot=Ye,k.useVfm=F,k.useVfmAttrs=We,k.vueFinalModalProps=te,Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});
